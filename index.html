<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Imposter — Party Word Game</title>
<style>
  body { margin:0; font-family:sans-serif; background:#0a0b14; color:#eee; }
  .app { max-width:900px; margin:0 auto; padding:20px; }
  .sysbar { display:flex; justify-content:space-between; padding:8px 14px; background:#111328; color:#bbb; }
  .screen { display:none; }
  .screen.active { display:block; }
  .card { background:#111328; border:1px solid #2a2c4a; border-radius:12px; padding:16px; margin-bottom:20px; }
  .btn { padding:10px 16px; border:none; border-radius:8px; cursor:pointer; margin-top:10px; }
  .btn.primary { background:#7c4dff; color:#fff; width:100%; }
  .btn.danger { background:#ff3b5f; color:#fff; }
  .btn.safe { background:#28c76f; color:#fff; }
  .players { display:grid; grid-template-columns:1fr 1fr 1fr; gap:12px; }
  .player { background:#1a1a2a; border:1px solid #2a2c4a; border-radius:10px; padding:12px; text-align:center; cursor:pointer; }
  .player.locked { opacity:.5; cursor:not-allowed; }
  .overlay { position:fixed; inset:0; background:rgba(0,0,0,.8); display:none; align-items:center; justify-content:center; }
  .overlay.show { display:flex; }
  .reveal { background:#222; padding:20px; border-radius:12px; text-align:center; max-width:400px; }
  .imposter { font-weight:bold; color:#ff3b5f; }
</style>
</head>
<body>
<div class="sysbar">
  <div id="clock">--</div>
  <div id="battery">22%</div>
</div>

<div class="app">

  <!-- Setup -->
  <section id="setup" class="screen active">
    <div class="card">
      <h2>Game Setup</h2>
      <label>Number of impostors <input id="numImps" type="number" min="1" value="1"></label>
      <label>Difficulty
        <select id="difficulty">
          <option value="easy" selected>Easy</option>
          <option value="medium">Medium</option>
          <option value="hard">Hard</option>
        </select>
      </label>
      <label>Category
        <select id="category">
          <option value="any">Any</option>
          <option value="movies">Movies</option>
          <option value="food">Food</option>
          <option value="sports">Sports</option>
          <option value="music">Music</option>
          <option value="animals">Animals</option>
          <option value="household">Household</option>
          <option value="geography">Geography</option>
          <option value="technology">Technology</option>
        </select>
      </label>
      <textarea id="names" placeholder="Mrs Belshaw
Miss Savage
Miss Benjelloun
Miss Connel"></textarea>
      <button id="startBtn" class="btn primary">Start Game</button>
      <div id="setupStatus"></div>
    </div>
  </section>

  <!-- Players -->
  <section id="playersScreen" class="screen">
    <div class="card">
      <h2>Players</h2>
      <div id="playersGrid" class="players"></div>
      <button id="toRound" class="btn safe">Go to round</button>
      <button id="revealImpsBtn" class="btn danger" style="display:none">Reveal Impostor(s)</button>
    </div>
  </section>

  <!-- Round -->
  <section id="roundScreen" class="screen">
    <div class="card">
      <h2>Round in progress</h2>
      <button id="newRound" class="btn primary">New round</button>
    </div>
  </section>

</div>

<!-- Reveal overlay -->
<div id="overlay" class="overlay">
  <div class="reveal">
    <h3 id="revealTitle">The word for —</h3>
    <p id="revealCat">Category: —</p>
    <div id="wordOrRole">—</div>
    <button id="gotIt" class="btn primary">Got it!</button>
  </div>
</div>

<!-- Impostor reveal overlay -->
<div id="impOverlay" class="overlay">
  <div class="reveal">
    <h2>Impostor(s)</h2>
    <div id="impNames"></div>
    <button id="impClose" class="btn danger">Close</button>
  </div>
</div>

<script>
// Build WORDS array programmatically
const WORDS = [];
function addWords(topic, category, difficulty, words) {
  words.forEach(w => WORDS.push({word:w, topic, category, difficulty}));
}

addWords("Food","food","easy",["Pizza","Burger","Sandwich","Pasta","Cake"]);
addWords("Food","food","medium",["Sushi","Curry","Falafel","Quiche","Dumplings"]);
addWords("Food","food","hard",["Brioche","Ratatouille","Gazpacho","Kimchi","Tiramisu"]);

addWords("Sports","sports","easy",["Football","Basketball","Tennis","Rugby","Swimming"]);
addWords("Sports","sports","medium",["Cricket","Badminton","Hockey","Volleyball","Boxing"]);
addWords("Sports","sports","hard",["Biathlon","Dressage","Curling","Pentathlon","Archery"]);

addWords("Movies","movies","easy",["Titanic","Superhero","Villain","Actor","Scene"]);
addWords("Movies","movies","medium",["Sequel","Director","Script","Trailer","Soundtrack"]);
addWords("Movies","movies","hard",["Montage","Cinematography","Cameo","Screenplay","Franchise"]);

addWords("Music","music","easy",["Guitar","Piano","Drum","Singer","Song"]);
addWords("Music","music","medium",["Tempo","Melody","Harmony","Choir","Festival"]);
addWords("Music","music","hard",["Polyrhythm","Crescendo","Fugue","Overture","Syncopation"]);

addWords("Animals","animals","easy",["Dog","Cat","Cow","Horse","Sheep"]);
addWords("Animals","animals","medium",["Penguin","Kangaroo","Tiger","Dolphin","Eagle"]);
addWords("Animals","animals","hard",["Axolotl","Platypus","Narwhal","Chameleon","Armadillo"]);

addWords("Household","household","easy",["Sofa","Chair","Bed","Lamp","Table"]);
addWords("Household","household","medium",["Microwave","Vacuum","Fridge","Curtain","Mirror"]);
addWords("Household","household","hard",["Decanter","Chandelier","Ottoman","Wardrobe","Tapestry"]);

addWords("Geography","geography","easy",["Desert","Mountain","River","Island","Forest"]);
addWords("Geography","geography","medium",["Volcano","Glacier","Canyon","Plateau","Oasis"]);
addWords("Geography","geography","hard",["Archipelago","Isthmus","Delta","Fjord","Atoll"]);

addWords("Technology","technology","easy",["Keyboard","Mouse","Screen","Printer","Wi-Fi"]);
addWords("Technology","technology","medium",["Router","Database","Browser","Server","Firewall"]);
addWords("Technology","technology","hard",["Algorithm","Blockchain","Compiler","Encryption","API"]);

<script>
// ... WORDS array already built above ...

// Game state
let players = [];
let impostorIndices = new Set();
let revealed = new Set();
let selectedWord = null;

const $ = id => document.getElementById(id);
const randInt = n => Math.floor(Math.random()*n);

function show(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  $(id).classList.add('active');
}

function buildPlayers(){
  const grid = $('playersGrid'); grid.innerHTML='';
  players.forEach((name,i)=>{
    const div=document.createElement('div');
    div.className='player';
    if(revealed.has(i)) div.classList.add('locked');
    div.textContent=name;
    div.onclick=()=>{ if(revealed.has(i)) return; openReveal(i); };
    grid.appendChild(div);
  });
  $('revealImpsBtn').style.display=(revealed.size===players.length && players.length>0) ? 'inline-block' : 'none';
}

function openReveal(i){
  const isImp = impostorIndices.has(i);
  $('revealTitle').textContent = `The word for ${players[i]}`;
  $('revealCat').textContent = `Category: ${selectedWord.topic}`;
  $('wordOrRole').textContent = isImp ? 'Imposter' : selectedWord.word;
  $('wordOrRole').className = isImp ? 'imposter' : 'word';
  $('overlay').classList.add('show');
  $('gotIt').onclick = () => {
    $('overlay').classList.remove('show');
    revealed.add(i);
    buildPlayers();
  };
}

$('startBtn').onclick = () => {
  players = $('names').value.split('\n').map(s=>s.trim()).filter(Boolean);
  const n = players.length;
  const k = parseInt($('numImps').value,10);
  const cat = $('category').value;
  const diff = $('difficulty').value;

  $('setupStatus').textContent='';
  if(n<3){ $('setupStatus').textContent='Need at least 3 players.'; return; }
  if(!Number.isFinite(k) || k<1 || k>=n){ $('setupStatus').textContent='Invalid impostor count.'; return; }

  // Assign impostors randomly
  impostorIndices = new Set();
  while(impostorIndices.size<k){
    impostorIndices.add(randInt(n));
  }

  // Pick word
  const pool1 = WORDS.filter(w=>(cat==='any'||w.category===cat)&&w.difficulty===diff);
  const pool2 = WORDS.filter(w=>(cat==='any'||w.category===cat));
  selectedWord = pool1.length ? pool1[randInt(pool1.length)] : (pool2.length ? pool2[randInt(pool2.length)] : WORDS[randInt(WORDS.length)]);

  revealed.clear();
  buildPlayers();
  show('playersScreen');
};

$('toRound').onclick = () => show('roundScreen');
$('newRound').onclick = () => show('setup');

$('revealImpsBtn').onclick = () => {
  const names = [...impostorIndices].map(i=>players[i]);
  $('impNames').textContent = names.join(', ');
  $('impOverlay').classList.add('show');
};
$('impClose').onclick = () => $('impOverlay').classList.remove('show');
</script>
</body>
</html>
