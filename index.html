<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Imposter — Party Word Game</title>
<style>
  body { margin:0; font-family:sans-serif; background:#0a0b14; color:#eee; }
  .app { max-width:800px; margin:0 auto; padding:20px; }
  .screen { display:none; }
  .screen.active { display:block; }
  .card { background:#111328; border:1px solid #2a2c4a; border-radius:12px; padding:16px; margin-bottom:20px; }
  .btn { padding:10px 16px; border:none; border-radius:8px; cursor:pointer; }
  .btn.primary { background:#7c4dff; color:#fff; }
  .btn.danger { background:#ff3b5f; color:#fff; }
  .btn.safe { background:#28c76f; color:#fff; }
  .players { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
  .player { background:#1a1a2a; border:1px solid #2a2c4a; border-radius:10px; padding:12px; text-align:center; cursor:pointer; }
  .player.locked { opacity:.5; cursor:not-allowed; }
  .overlay { position:fixed; inset:0; background:rgba(0,0,0,.8); display:none; align-items:center; justify-content:center; }
  .overlay.show { display:flex; }
  .reveal { background:#222; padding:20px; border-radius:12px; text-align:center; }
  .imposter { font-weight:bold; color:#ff3b5f; }
</style>
</head>
<body>
<div class="app">

  <!-- Setup -->
  <section id="setup" class="screen active">
  <div class="card">
    <h2 style="margin-bottom:12px;">Game Setup</h2>

    <div class="row">
      <div class="field">
        <label for="numImps">Number of impostors</label>
        <input id="numImps" type="number" min="1" value="1">
      </div>
      <div class="field">
        <label for="difficulty">Difficulty</label>
        <select id="difficulty">
          <option value="easy" selected>Easy</option>
          <option value="medium">Medium</option>
          <option value="hard">Hard</option>
        </select>
      </div>
    </div>

    <div class="row" style="margin-top:12px;">
      <div class="field">
        <label for="category">Category</label>
        <select id="category">
          <option value="any">Any</option>
          <option value="movies">Movies</option>
          <option value="food">Food</option>
          <option value="sports">Sports</option>
          <option value="music">Music</option>
          <option value="animals">Animals</option>
          <option value="household">Household</option>
          <option value="geography">Geography</option>
          <option value="technology">Technology</option>
        </select>
      </div>
      <div class="field">
        <label><input id="showCatImp" type="checkbox" checked> Show category to impostor</label>
        <label><input id="showHintImp" type="checkbox"> Show hint to impostor</label>
      </div>
    </div>

    <div style="margin-top:16px;">
      <label for="names">Players (one per line)</label>
      <textarea id="names" placeholder="Mrs Belshaw
Miss Savage
Miss Benjelloun
Miss Connel"></textarea>
    </div>

    <button id="startBtn" class="btn primary" style="margin-top:16px; width:100%;">Start Game</button>
    <div id="setupStatus" style="margin-top:10px;"></div>
  </div>
</section>

  <!-- Players -->
  <section id="playersScreen" class="screen">
    <div class="card">
      <h2>Players</h2>
      <p>Tap your name to reveal your word, then pass the device.</p>
      <div id="playersGrid" class="players"></div>
      <button id="toRound" class="btn safe">Go to round</button>
      <button id="revealImpsBtn" class="btn danger" style="display:none">Reveal Impostor(s)</button>
    </div>
  </section>

  <!-- Round -->
  <section id="roundScreen" class="screen">
    <div class="card">
      <h2>Round in progress</h2>
      <p>Each player gives one clue. Then vote who’s the impostor.</p>
      <button id="newRound" class="btn primary">New round</button>
    </div>
  </section>

</div>

<!-- Reveal overlay -->
<div id="overlay" class="overlay">
  <div class="reveal">
    <h3 id="revealTitle">The word for —</h3>
    <p id="revealCat">Category: —</p>
    <div id="wordOrRole">—</div>
    <button id="gotIt" class="btn primary">Got it!</button>
  </div>
</div>

<!-- Impostor reveal overlay -->
<div id="impOverlay" class="overlay">
  <div class="reveal">
    <h2>Impostor(s)</h2>
    <div id="impNames"></div>
    <button id="impClose" class="btn danger">Close</button>
  </div>
</div>

<script>
/* Expanded WORDS array (120 entries) */
const WORDS = [
  // Food (15)
  {word:"Pizza",topic:"Food",category:"food",difficulty:"easy"},
  {word:"Burger",topic:"Food",category:"food",difficulty:"easy"},
  {word:"Sandwich",topic:"Food",category:"food",difficulty:"easy"},
  {word:"Pasta",topic:"Food",category:"food",difficulty:"easy"},
  {word:"Cake",topic:"Food",category:"food",difficulty:"easy"},
  {word:"Sushi",topic:"Food",category:"food",difficulty:"medium"},
  {word:"Curry",topic:"Food",category:"food",difficulty:"medium"},
  {word:"Falafel",topic:"Food",category:"food",difficulty:"medium"},
  {word:"Quiche",topic:"Food",category:"food",difficulty:"medium"},
  {word:"Dumplings",topic:"Food",category:"food",difficulty:"medium"},
  {word:"Brioche",topic:"Food",category:"food",difficulty:"hard"},
  {word:"Ratatouille",topic:"Food",category:"food",difficulty:"hard"},
  {word:"Gazpacho",topic:"Food",category:"food",difficulty:"hard"},
  {word:"Kimchi",topic:"Food",category:"food",difficulty:"hard"},
  {word:"Tiramisu",topic:"Food",category:"food",difficulty:"hard"},

  // Sports (15)
  {word:"Football",topic:"Sports",category:"sports",difficulty:"easy"},
  {word:"Basketball",topic:"Sports",category:"sports",difficulty:"easy"},
  {word:"Tennis",topic:"Sports",category:"sports",difficulty:"easy"},
  {word:"Rugby",topic:"Sports",category:"sports",difficulty:"easy"},
  {word:"Swimming",topic:"Sports",category:"sports",difficulty:"easy"},
  {word:"Cricket",topic:"Sports",category:"sports",difficulty:"medium"},
  {word:"Badminton",topic:"Sports",category:"sports",difficulty:"medium"},
  {word:"Hockey",topic:"Sports",category:"sports",difficulty:"medium"},
  {word:"Volleyball",topic:"Sports",category:"sports",difficulty:"medium"},
  {word:"Boxing",topic:"Sports",category:"sports",difficulty:"medium"},
  {word:"Biathlon",topic:"Sports",category:"sports",difficulty:"hard"},
  {word:"Dressage",topic:"Sports",category:"sports",difficulty:"hard"},
  {word:"Curling",topic:"Sports",category:"sports",difficulty:"hard"},
  {word:"Pentathlon",topic:"Sports",category:"sports",difficulty:"hard"},
  {word:"Archery",topic:"Sports",category:"sports",difficulty:"hard"},

  // Geography (15)
  {word:"Desert",topic:"Geography",category:"geography",difficulty:"easy"},
  {word:"Mountain",topic:"Geography",category:"geography",difficulty:"easy"},
  {word:"River",topic:"Geography",category:"geography",difficulty:"easy"},
  {word:"Island",topic:"Geography",category:"geography",difficulty:"easy"},
  {word:"Forest",topic:"Geography",category:"geography",difficulty:"easy"},
  {word:"Volcano",topic:"Geography",category:"geography",difficulty:"medium"},
  {word:"Glacier",topic:"Geography",category:"geography",difficulty:"medium"},
  {word:"Canyon",topic:"Geography",category:"geography",difficulty:"medium"},
  {word:"Plateau",topic:"Geography",category:"geography",difficulty:"medium"},
  {word:"Oasis",topic:"Geography",category:"geography",difficulty:"medium"},
  {word:"Archipelago",topic:"Geography",category:"geography",difficulty:"hard"},
  {word:"Isthmus",topic:"Geography",category:"geography",difficulty:"hard"},
  {word:"Delta",topic:"Geography",category:"geography",difficulty:"hard"},
  {word:"Fjord",topic:"Geography",category:"geography",difficulty:"hard"},
  {word:"Atoll",topic:"Geography",category:"geography",difficulty:"hard"},

  // Technology (15)
  {word:"Keyboard",topic:"Technology",category:"technology",difficulty:"easy"},
  {word:"Mouse",topic:"Technology",category:"technology",difficulty:"easy"},
  {word:"Screen",topic:"Technology",category:"technology",difficulty:"easy"},
  {word:"Printer",topic:"Technology",category:"technology",difficulty:"easy"},
  {word:"Wi-Fi",topic:"Technology",category:"technology",difficulty:"easy"},
  {word:"Router",topic:"Technology",category:"technology",difficulty:"medium"},
  {word:"Database",topic:"Technology",category:"technology",difficulty:"medium"},
  {word:"Browser",topic:"Technology",category:"technology",difficulty:"medium"},
  {word:"Server",topic:"Technology",category:"technology",difficulty:"medium"},
  {word:"Firewall",topic:"Technology",category:"technology",difficulty:"medium"},
  {word:"Algorithm",topic:"Technology",category:"technology",difficulty:"hard"},
  {word:"Blockchain",topic:"Technology",category:"technology",difficulty:"hard"},
  {word:"Compiler",topic:"Technology",category:"technology",difficulty:"hard"},
  {word:"Encryption",topic:"Technology",category:"technology",difficulty:"hard"},
  {word:"API",topic:"Technology",category:"technology",difficulty:"hard"},

  // Movies (15)
  {word:"Titanic",topic:"Movies",category:"movies",difficulty:"easy"},
  {word:"Superhero",topic:"Movies",category:"movies",difficulty:"easy"},
  {word:"Villain",topic:"Movies",category:"movies",difficulty:"easy"},
  {word:"Actor",topic:"Movies",category:"movies",difficulty:"easy"},
  {word:"Scene",topic:"Movies",category:"movies",difficulty:"easy"},
  {word:"Sequel",topic:"Movies",category:"movies",difficulty:"medium"},
  {word:"Director",topic:"Movies",category:"movies",difficulty:"medium"},
  {word:"Script",topic:"Movies",category:"movies",difficulty:"medium"},
  {word:"Trailer",topic:"Movies",category:"movies",difficulty:"medium"},
  {word:"Soundtrack",topic:"Movies",category:"movies",difficulty:"medium"},
  {word:"Montage",topic:"Movies",category:"movies",difficulty:"hard"},
  {word:"Cinematography",topic:"Movies",category:"movies",difficulty:"hard"},
  {word:"Cameo",topic:"Movies",category:"movies",difficulty:"hard"},
  {word:"Screenplay",topic:"Movies",category:"movies",difficulty:"hard"},
  {word:"Franchise",topic:"Movies",category:"movies",difficulty:"hard"},

  // Music (15)
  {word:"Guitar",topic:"Music",category:"music",difficulty:"easy"},
  {word:"Piano",topic:"Music",category:"music",difficulty:"easy"},
  {word:"Drum",topic:"Music",category:"music",difficulty:"easy"},
  {word:"Singer",topic:"Music",category:"music",difficulty:"easy"},
  {word:"Song",topic:"Music",category:"music",difficulty:"easy"},
  {word:"Tempo",topic:"Music",category:"music",difficulty:"medium"},
  {word:"Melody",topic:"Music",category:"music",difficulty:"medium"},
  {word:"Harmony",topic:"Music",category:"music",difficulty:"medium"},
  {word:"Choir",topic:"Music",category:"music",difficulty:"medium"},
  {word:"Festival",topic:"Music",category:"music",difficulty:"medium"},
  {word:"Polyrhythm",topic:"Music",category:"music",difficulty:"hard"},
  {word:"Crescendo",topic:"Music",category:"music",difficulty:"hard"},
  {word:"Fugue",topic:"Music",category:"music",difficulty:"hard"},
  {word:"Overture",topic:"Music",category:"music",difficulty:"hard"},
  {word:"Syncopation",topic:"Music",category:"music",difficulty:"hard"},

  // Animals (15)
  {word:"Dog",topic:"Animals",category:"animals",difficulty:"easy"},
  {word:"Cat",topic:"Animals",category:"animals",difficulty:"easy"},
  {word:"Cow",topic:"Animals",category:"animals",difficulty:"easy"},
  {word:"Horse",topic:"Animals",category:"animals",difficulty:"easy"},
  {word:"Sheep",topic:"Animals",category:"animals",difficulty:"easy"},
  {word:"Penguin",topic:"Animals",category:"animals",difficulty:"medium"},
  {word:"Kangaroo",topic:"Animals",category:"animals",difficulty:"medium"},
  {word:"Tiger",topic:"Animals",category:"animals",difficulty:"medium"},
  {word:"Dolphin",topic:"Animals",category:"animals",difficulty:"medium"},
  {word:"Eagle",topic:"Animals",category:"animals",difficulty:"medium"},
  {word:"Axolotl",topic:"Animals",category:"animals",difficulty:"hard"},
  {word:"Platypus",topic:"Animals",category:"animals",difficulty:"hard"},
  {word:"Narwhal",topic:"Animals",category:"animals",difficulty:"hard"},
  {word:"Chameleon",topic:"Animals",category:"animals",difficulty:"hard"},
  {word:"Armadillo",topic:"Animals",category:"animals",difficulty:"hard"},

  // Household (15)
  {word:"Sofa",topic:"Household",category:"household",difficulty:"easy"},
  {word:"Chair",topic:"Household",category:"household",difficulty:"easy"},
  {word:"Bed",topic:"Household",category:"household",difficulty:"easy"},
  {word:"Lamp",topic:"Household",category:"household",difficulty:"easy"},
  {word:"Table",topic:"Household",category:"household",difficulty:"easy"},
  {word:"Microwave",topic:"Household",category:"household",difficulty:"medium"},
  {word:"Vacuum",topic:"Household",category:"household",difficulty:"medium"},
  {word:"Fridge",topic:"Household",category:"household",difficulty:"medium"},
  {word:"Curtain",topic:"Household",category:"household",difficulty:"medium"},
  {word:"Mirror",topic:"Household",category:"household",difficulty:"medium"},
  {word:"Decanter",topic:"Household",category:"household",difficulty:"hard"},
  {word:"Chandelier",topic:"Household",category:"household",difficulty:"hard"},
  {word:"Ottoman",topic:"Household",category:"household",difficulty:"hard"},
  {word:"Wardrobe",topic:"Household",category:"household",difficulty:"hard"},
  {word:"Tapestry",topic:"Household",category:"household",difficulty:"hard"},
];

/* State */
let players = [];
let impostorIndices = new Set();
let revealed = new Set();
let selectedWord = null;

/* Helpers */
const $ = (id) => document.getElementById(id);
const randInt = (n) => Math.floor(Math.random() * n);
const shuffle = (arr) => { for(let i=arr.length-1;i>0;i--){const j=randInt(i+1); [arr[i],arr[j]]=[arr[j],arr[i]]} return arr; };

function show(id){ document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active')); $(id).classList.add('active'); }

function buildPlayers(){
  const grid = $('playersGrid'); grid.innerHTML = '';
  players.forEach((name, i)=>{
    const div = document.createElement('div');
    div.className = 'player';
    if(revealed.has(i)) div.classList.add('locked');
    div.textContent = name;
    div.onclick = () => { if(revealed.has(i)) return; openReveal(i); };
    grid.appendChild(div);
  });
  $('revealImpsBtn').style.display = (revealed.size === players.length && players.length > 0) ? 'inline-block' : 'none';
}

function openReveal(i){
  const isImp = impostorIndices.has(i);
  $('revealTitle').textContent = `The word for ${players[i]}`;
  $('revealCat').textContent = `Category: ${selectedWord.topic}`;
  $('wordOrRole').textContent = isImp ? 'Imposter' : selectedWord.word;
  $('wordOrRole').className = isImp ? 'imposter' : 'word';
  $('overlay').classList.add('show');
  $('gotIt').onclick = () => {
    $('overlay').classList.remove('show');
    revealed.add(i);
    buildPlayers();
  };
}

$('startBtn').onclick = () => {
  players = $('names').value.split('\n').map(s=>s.trim()).filter(Boolean);
  const n = players.length;
  const k = parseInt($('numImps').value, 10);
  const cat = $('category').value;
  const diff = $('difficulty').value;

  $('setupStatus').textContent = '';
  if(n < 3){ $('setupStatus').textContent = 'Need at least 3 players.'; return; }
  if(!Number.isFinite(k) || k < 1 || k >= n){ $('setupStatus').textContent = 'Impostors must be ≥1 and fewer than players.'; return; }

  // Assign impostors randomly
  impostorIndices = new Set();
  const indices = shuffle([...Array(n).keys()]);
  for(let i=0;i<k;i++) impostorIndices.add(indices[i]);

  // Pick word by category/difficulty (fallback to any/difficulty if empty, then any/any)
  const pool1 = WORDS.filter(w => (cat==='any'||w.category===cat) && w.difficulty===diff);
  const pool2 = WORDS.filter(w => (cat==='any'||w.category===cat));
  selectedWord = pool1.length ? pool1[randInt(pool1.length)] : (pool2.length ? pool2[randInt(pool2.length)] : WORDS[randInt(WORDS.length)]);

  revealed.clear();
  buildPlayers();
  show('playersScreen');
};

$('toRound').onclick = () => show('roundScreen');
$('newRound').onclick = () => show('setup');

$('revealImpsBtn').onclick = () => {
  const names = [...impostorIndices].map(i => players[i]);
  $('impNames').textContent = names.join(', ');
  $('impOverlay').classList.add('show');
};
$('impClose').onclick = () => $('impOverlay').classList.remove('show');
</script>
</body>
</html>